"use strict";(self["webpackChunkos_dash"]=self["webpackChunkos_dash"]||[]).push([[719],{26719:(e,n,t)=>{t.r(n),t.d(n,{default:()=>W});var a=t(59835),s=t(61957),l=t(60499),o=t(15521),u=t(26557);const i=(0,a.aZ)({__name:"SubmitButton",props:{allSet:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},dataCyBtn:{default:""},icon:{}},setup(e){const n=e,t=(0,a.Fl)((()=>n.allSet?"positive":"grey-7"));return(e,n)=>{const s=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.j4)(s,{type:"submit",class:"full-width",color:t.value,padding:"md",icon:e.icon,loading:e.isLoading,disable:!e.allSet,"data-cy":e.dataCyBtn},null,8,["color","icon","loading","disable","data-cy"])}}});var r=t(68879),c=t(69984),d=t.n(c);const g=i,v=g;d()(i,"components",{QBtn:r.Z});var p=t(28339),m=t(25121),h=t(69036),f=function(e,n,t,a){function s(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,l){function o(e){try{i(a.next(e))}catch(n){l(n)}}function u(e){try{i(a["throw"](e))}catch(n){l(n)}}function i(e){e.done?t(e.value):s(e.value).then(o,u)}i((a=a.apply(e,n||[])).next())}))};class w extends h.Z{authentication(e){return f(this,void 0,void 0,(function*(){return this.timeoutInMilliseconds=1e4,this.request.post("v1/auth/login/",e)}))}}var y=t(20503),_=t(21809),Z=t(88900),b=t(19302),C=t(53105);const k={class:"flex justify-center"},q={class:"q-gutter-y-md q-mt-xs"},L=(0,a.aZ)({__name:"LoginIndex",setup(e){const n=(0,p.tv)(),{t}=(0,m.QT)(),i=(0,l.iH)(""),r=(0,l.iH)(""),c=(0,l.iH)(!1),d=(0,a.Fl)((()=>i.value.length>=3&&r.value.length>=6)),g=(0,a.Fl)((()=>{const e=(0,b.Z)(),n=(0,C.Z)();return e.dark.isActive?n+"assets/os-logo-dark.svg":n+"assets/os-logo-light.svg"}));function h(){c.value=!0;const e=new w;c.value=!0,e.authentication({username:i.value,password:r.value}).then((e=>{(0,Z.LX)(t("login.messageLoginSuccess"));const a=new y.Z,s=new _.Z;a.clearAllLocalStorage(),s.removeToken(),s.setToken(e.data.body.tokenStr),a.setUsername(i.value),n.push("/overview")})).catch((e=>{(0,Z.s9)(e.response.data,t("login.messageLoginError"))})).finally((()=>{c.value=!1}))}return(e,n)=>{const t=(0,a.up)("q-img"),l=(0,a.up)("q-card-section"),p=(0,a.up)("q-card"),m=(0,a.up)("q-page-container");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",class:"absolute-center no-shadow login-bg-blur login-card"},{default:(0,a.w5)((()=>[(0,a._)("div",k,[(0,a.Wm)(t,{src:g.value,style:{width:"140px",height:"62.9px",top:"-25px"}},null,8,["src"])]),(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a._)("div",q,[(0,a.Wm)(o.Z,{value:i.value,"onUpdate:value":n[0]||(n[0]=e=>i.value=e),label:"Username",dataCyInput:"login-username",icon:"sym_s_person",rules:[()=>""!==i.value||e.$t("accountsCreateUserDialog.usernameRequired"),()=>i.value.length>=3||e.$t("accountsCreateUserDialog.usernameMinLength")]},null,8,["value","rules"]),(0,a.Wm)(u.Z,{dataCyInput:"login-password",password:r.value,"onUpdate:password":n[1]||(n[1]=e=>r.value=e),onKeyup:n[2]||(n[2]=(0,s.D2)((e=>h()),["enter"]))},null,8,["password"]),(0,a.Wm)(v,{dataCyBtn:"login-btn",class:"q-mt-lg",icon:"sym_s_login",allSet:d.value,isLoading:c.value,onClick:n[3]||(n[3]=e=>h())},null,8,["allSet","isLoading"])])])),_:1})])),_:1})])),_:1})}}});var S=t(12133),x=t(44458),B=t(70335),Q=t(63190);const U=L,W=U;d()(L,"components",{QPageContainer:S.Z,QCard:x.Z,QImg:B.Z,QCardSection:Q.Z})}}]);